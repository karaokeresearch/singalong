<html>
	<head>
		<title>Sort-of strumming instrument</title>
	</head>
	<body bgcolor="blue">
		<script src="gyro.js"></script>
		<script src="howler.js"></script>
		<script type="text/javascript" src="teoria.js" ></script>
		<script>

			var stringIDs=[];
			var chordNotes=[];

			var changeChord = function (whichChord){
				var tempChordNotes =[];
				var chord=teoria.chord(whichChord);
				for (i=0; i< chord.notes().length; i++) {
					tempChordNotes.push((chord.notes()[i].key()+4)%24);
				}
				for (i=0; i< chord.notes().length; i++) {
					tempChordNotes.push(((chord.notes()[i].key()+16)%24));
				}
				tempChordNotes.sort(function(a, b){return a-b});
				return tempChordNotes;
			}

			chordNotes=changeChord('C');


			noteLength=4000;
			var sound = new Howl({
				urls: ['strumAscendAmono.ogg' ],
				volume: 0.65,
				sprite: {
					1 : [ 0*noteLength, 3800],
					2 : [ 1*noteLength, 3800],
					3 : [ 2*noteLength, 3800],
					4 : [ 3*noteLength, 3800],
					5 : [ 4*noteLength, 3800],
					6 : [ 5*noteLength, 3800],
					7 : [ 6*noteLength, 3800],
					8 : [ 7*noteLength, 3800],
					9 : [ 8*noteLength, 3800],
					10 : [ 9*noteLength, 3800],
					11 : [10*noteLength, 3800],
					12 : [11*noteLength, 3800],
					13 : [12*noteLength, 3800],
					14 : [13*noteLength, 3800],
					15 : [14*noteLength, 3800],
					16 : [15*noteLength, 3800],
					17 : [16*noteLength, 3800],
					18 : [17*noteLength, 3800],
					19 : [18*noteLength, 3800],
					20 : [19*noteLength, 3800],
					21 : [20*noteLength, 3800],
					22 : [21*noteLength, 3800],
					23 : [22*noteLength, 3800],
					24 : [23*noteLength, 3800]
				}
			});









			gyro.frequency=50;



	var previousAngle;

		gyro.startTracking(function(o) {

			if ((o.beta >=-15 && previousAngle<-15) || (o.beta <=-15 && previousAngle>-15)){
				sound.play(chordNotes[1]+1);
			}

			if ((o.beta >=-5 && previousAngle<-5) || (o.beta <=-5 && previousAngle>-5)){
				sound.play(chordNotes[2]+1);
			}

			if ((o.beta >=5 && previousAngle<5) || (o.beta <=5 && previousAngle>5)){
				sound.play(chordNotes[3]+1);
			}

			if ((o.beta >=15 && previousAngle<15) || (o.beta <=15 && previousAngle>15)){
				sound.play(chordNotes[4]+1);
			}


			previousAngle=o.beta;

		});


		</script>
	</body>
</html>
