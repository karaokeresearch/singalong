<html>
	<head>
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="assets/style.css">
		<title>Strum test</title>
	</head>
	<body style="padding: 0; margin: 0;">

			<div id="hit" style="font-size: 0; background: #42d692; padding: 0px;">
				<span id="target" style="background: #9fe1e7; display: inline-block; width: 20%; height: 75%;"></span>
				<span id="target" style="background: #222222; display: inline-block; width: 20%; height: 75%;"></span>
				<span id="target" style="background: #9fe1e7; display: inline-block; width: 20%; height: 75%;"></span>
				<span id="target" style="background: #222222; display: inline-block; width: 20%; height: 75%;"></span>
				<span id="target" style="background: #9fe1e7; display: inline-block; width: 20%; height: 75%;"></span>
			</div>
			<p></p>
			<div style="font-size:2em; font-face: Arial; text-align:center;">Use your finger or mouse to strum across the blue and black squares above.</div>
		<script src="hammer.js"></script>
		<script type="text/javascript" src="howler.js" ></script>
		<script>
			var xPrev=0;


			var el = document.querySelector("#hit");
		

			var mc = new Hammer(el);
			mc.on("panmove", logGesture);
			mc.on("tap", playNote);

			//mc.on("swipe pan panstart panmove panend pancancel multipan press pressup pinch rotate tap doubletap",


			i=0;
			minor=false;
			stringIDs=[];
			chordnotes=[];

			chordnotes[0] = i%24;

			if (minor==true){
				chordnotes[1] =(i+3)%24;
			}
			else{
				chordnotes[1] =(i+4)%24;
			}

			chordnotes[2] =(i+7)%24;
			chordnotes[3] = (i+12)%24;

			if (minor==true){
				chordnotes[4] =(i+15)%24;
			}
			else{
				chordnotes[4] =(i+16)%24;
			}
			chordnotes[5] =(i+19)%24;

			chordnotes.sort(function(a, b){return a-b});

			noteLength=4000;


			var sound = new Howl({
				urls: ['strumAscendAmono.ogg' ],
				sprite: {
					1 : [ 0*noteLength, 3800],
					2 : [ 1*noteLength, 3800],
					3 : [ 2*noteLength, 3800],
					4 : [ 3*noteLength, 3800],
					5 : [ 4*noteLength, 3800],
					6 : [ 5*noteLength, 3800],
					7 : [ 6*noteLength, 3800],
					8 : [ 7*noteLength, 3800],
					9 : [ 8*noteLength, 3800],
					10 : [ 9*noteLength, 3800],
					11 : [10*noteLength, 3800],
					12 : [11*noteLength, 3800],
					13 : [12*noteLength, 3800],
					14 : [13*noteLength, 3800],
					15 : [14*noteLength, 3800],
					16 : [15*noteLength, 3800],
					17 : [16*noteLength, 3800],
					18 : [17*noteLength, 3800],
					19 : [18*noteLength, 3800],
					20 : [19*noteLength, 3800],
					21 : [20*noteLength, 3800],
					22 : [21*noteLength, 3800],
					23 : [22*noteLength, 3800],
					24 : [23*noteLength, 3800]
				}
			});







			function playNote(ev) {
				sound.play(chordnotes[1]);
			}

			function logGesture(ev) {


				for (j = 1; j < 5; j++) {
					stringPos=j*(window.innerWidth/5);

					if((ev.center.x >stringPos && xPrev<stringPos) || (ev.center.x <stringPos && xPrev>stringPos)) {
						sound.play(chordnotes[j-1]+1,function(soundID){
							stringIDs[j-1]=soundID;
						});
					}

				}


				xPrev=ev.center.x;
			}

		</script>
	</body>
</html>
