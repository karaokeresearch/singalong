<html>
	<head>
		<script src="/socket.io/socket.io.js"></script>
		<script src="ntpclient.js"></script>
		<script src="howler.js"></script>
		<script src="cookies.js"></script>
		<script src="../jquery-2.1.1.min.js"></script>
		<script src="playalong.js"></script>

		<script>

	//		var one = new Howl({
	//			urls: ['/one.wav']
	//		});
	//		var two = new Howl({
	//			urls: ['/two.wav']
	//		});
	//		var three = new Howl({
	//			urls: ['/three.wav']
	//		});
	//		var four = new Howl({
	//			urls: ['/four.wav']
	//		});

			var socket = io.connect();
			ntp.init(socket);      
			//playalong.init(socket);


	//		setInterval(function () { //demo: add items to the queue once a second
	//			playQueue.push([ntp.serverTime() + 1000-(ntp.serverTime()%1000) +1000,1])

	//		},1000);


//			setInterval(function () { //the queue
//				document.getElementById("report").innerHTML=  "Server time: <br>" + ntp.serverTime() + "<br>Offset:" +ntp.offset();//what time the server thinks it is
//				
//				while ((playQueue.length>0) && (playQueue[0][0]>ntp.serverTime()===false)){ //clear up any cruft or past entries
//					playQueue.shift();
//				}
//
//				while ((playQueue.length>0) &&(playQueue[0][0] - ntp.serverTime() <500)){//although it's tested every 500 ms, we can schedule up to 1000 away.
//					setTimeout(function (){ //what happens to items in the queue
//						var count=(Math.round(ntp.serverTime()/1000)%4 )+1;
//						if (count===1){
//							one.play();
//						}
//						if (count===2){
//							two.play();
//						}
//						if (count===3){
//							three.play();
//						}
//						if (count===4){
//							four.play();
//						}
//						//console.log(count);
//						//document.getElementById("count").innerHTML= count;
//						document.getElementById("count").innerHTML= ntp.serverTime();
//
//
//					}, playQueue[0][0] - ntp.serverTime() + lagOverride );
//					playQueue.shift();
//				}
//			},250);
//
//			var updateLagReadout= function(){
//				lagOverride = parseInt( document.getElementById("latency").value);
//				if (lagOverride===0){
//					document.getElementById("latency").value = Cookies.get('latency');
//					lagOverride = (parseInt(Cookies.get('latency')) || 0);
//				}
//				document.getElementById("lag").innerHTML = "Lag override: " + lagOverride;
//				Cookies.set('latency', lagOverride, {expires: '01/01/3000'});
//			};
//
//			updateLagReadout();
//


var startCalibration=function(){
    socket.emit('calibration', {
	        data: 'start'
	    }); 
}


var stopCalibration=function(){
    socket.emit('calibration', {
	        data: 'stop'
	    }); 
}



		</script>
	</head>
	<body>

<div style="font-family:Sans-serif; font-size:3em" onclick="startCalibration()">Start Calibration</div>
<div style="font-family:Sans-serif; font-size:3em" onclick="stopCalibration()">Stop Calibration</div>
		
		
	</body>
</html>